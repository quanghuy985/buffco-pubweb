<?php $__env->startSection('titleAdmin'); ?>
<?php echo Lang::get('backend/title.supporter.title'); ?>
<?php $__env->stopSection(); ?>
<?php $__env->startSection("contentadmin"); ?>
<script>
    function phantrang(page) {
        var request = jQuery.ajax({
            url: "<?php echo URL::action('\BackEnd\SupporterController@postAjaxpagion'); ?>?page=" + page,
            type: "POST",
            dataType: "html"
        });
        request.done(function(msg) {
            jQuery('#tableproduct').html(msg);
        });
    }
    function xoasanpham(id) {
        jConfirm("<?php echo Lang::get('messages.delete_confirm'); ?>", "<?php echo Lang::get('messages.alert'); ?>", function(r) {
            if (r == true) {
                var request = jQuery.ajax({
                    url: "<?php echo URL::action('\BackEnd\SupporterController@postDeleteSupporter'); ?>?id=" + id,
                    type: "POST",
                    dataType: "html"
                });
                request.done(function(msg) {
                    jQuery('#tableproduct').html(msg);
                    jQuery('#messages1').empty().html(" <div class='notibar msgsuccess'><a class='close'></a><p><?php echo Lang::get('messages.delete.success'); ?></p> </div>");
                });
                return false;
            } else {
                return false;
            }
        })
    }
    function kichhoat(id, stus) {
        var request = jQuery.ajax({
            url: "<?php echo URL::action('\BackEnd\SupporterController@postSupporterActive'); ?>?id=" + id + "&status=" + stus,
            type: "POST",
            dataType: "html"
        });
        request.done(function(msg) {
            jQuery('#tableproduct').html(msg);
            jQuery('#messages1').empty().html("<div class='notibar msgsuccess'><a class='close'></a><p><?php echo Lang::get('messages.update.success'); ?></p> </div>")
                    ;
        });
        return true;
    }
</script>
<div class="pageheader notab">
    <h1 class="pagetitle"><?php echo Lang::get('backend/title.supporter.heading'); ?></h1>
    <span class="pagedesc"><?php echo Lang::get('backend/title.supporter.description'); ?></span>
</div>
<div class="contentwrapper">
    <div class="contenttitle2">
        <h3><?php echo Lang::get('backend/title.supporter.caption'); ?></h3>
    </div>
    &nbsp;&nbsp;&nbsp;<a href="<?php echo URL::action('\BackEnd\SupporterController@getSupporterView'); ?>#frmSuport" class="btn btn_orange btn_link"><span><?php echo Lang::get('button.add'); ?></span></a>
    <div class="contentwrapper">
        <div class="subcontent">
            <table cellpadding="0" cellspacing="0" border="0" id="table2" class="stdtable stdtablecb">
                <colgroup>
                    <col class="con1" style="width: 3%">
                    <col class="con0" style="width: 20%">
                    <col class="con1" style="width: 10%">
                    <col class="con0" style="width: 12%">
                    <col class="con1" style="width: 10%">
                    <col class="con0" style="width: 10%">
                    <col class="con0" style="width: 10%">
                    <col class="con1" style="width: 10%">
                    <col class="con1" style="width: 15%">
                </colgroup>
                <thead>
                    <tr>
                        <th class="head1"><?php echo Lang::get('general.stt'); ?></th>
                        <th class="head0"><?php echo Lang::get('general.supporterName'); ?></th>
                        <th class="head1"><?php echo Lang::get('general.group_support'); ?></th>
                        <th class="head0">Yahoo</th>
                        <th class="head1">Skype</th>
                        <th class="head0"><?php echo Lang::get('general.phone'); ?></th>
                        <th class="head1"><?php echo Lang::get('general.time'); ?></th>
                        <th class="head0"><?php echo Lang::get('general.status'); ?></th>
                        <th class="head1"><?php echo Lang::get('general.action'); ?></th>
                    </tr>
                </thead>

                <tbody id="tableproduct" class="tabledataajax">
                    <?php echo $__env->make('backend.supporter.supporterAjax', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                </tbody>
            </table>
        </div>
    </div>
    <div class="contenttitle2">
        <h3>
            <?php if(!isset($supportData)): ?>
            <?php echo Lang::get('backend/title.supporter.add'); ?>
            <?php else: ?>
            <?php echo Lang::get('backend/title.supporter.edit'); ?>
            <?php endif; ?>
        </h3>
    </div>
    <?php echo $__env->make('backend.alert', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
    <?php if(isset($supportData)): ?>
    <script>jQuery(document).ready(function() {
            jQuery('html, body').animate({scrollTop: jQuery("#frmSuport").offset().top}, 1000);
        })</script>
    <?php echo Form::model($supportData, array('action'=>'\BackEnd\SupporterController@postUpdateSupport', 'id'=>'frmSuport', 'class'=>'stdform stdform2')); ?>
    <?php else: ?>
    <?php echo Form::open(array('action'=>'\BackEnd\SupporterController@postAddSupport', 'id'=>'frmSuport', 'class'=>'stdform stdform2')); ?>
    <?php endif; ?>
    <p><?php echo Form::hidden('id'); ?></p>
    <p>
        <label><?php echo Lang::get('general.group_support'); ?></label>
        <span class="field">

            <select name="cbSupportGroup">
                <?php
                foreach ($arrSupporterGroup as $item) {
                    echo '<option  value="' . $item->id . '">' . $item->supporterGroupName . '</option>';
                }
                ?>
            </select>
        </span>
    </p>

    <p>
        <label><?php echo Lang::get('general.supporterName'); ?></label>
        <span class="field">
            <?php echo Form::text('supporterName', null, array('class'=>'longinput')); ?>
        </span>
    </p>

    <p>
        <label>Yahoo</label>
        <span class="field">
            <?php echo Form::text('supporterNickYH', null, array('class'=>'longinput')); ?>
        </span>
    </p>

    <p>
        <label>Skype</label>
        <span class="field">
            <?php echo Form::text('supporterNickSkype', null, array('class'=>'longinput')); ?>
        </span>
    </p>

    <p>
        <label><?php echo Lang::get('general.phone'); ?></label>
        <span class="field">
            <?php echo Form::text('supporterPhone', null, array('class'=>'longinput')); ?>
    </p>

    <p>
        <label><?php echo Lang::get('general.status'); ?></label>
        <span class="field">
            <?php
            $supporter_status = Lang::get('general.supporter_status');
            echo Form::select('status', $supporter_status);
            ?>
        </span>
    </p>
    <p class="stdformbutton">
        <button class="submit radius2" type="submit">
            <?php if(isset($supportData)): ?><?php echo Lang::get('button.update'); ?><?php else: ?><?php echo Lang::get('button.add'); ?><?php endif; ?>
        </button>
        <input type="reset" class="reset radius2" value="<?php echo Lang::get('button.reset'); ?>">
    </p>
    <?php echo Form::close(); ?>
</div>
<?php $__env->stopSection(); ?>
<?php echo $__env->make("backend.template", array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>